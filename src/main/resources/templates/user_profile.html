<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{layout}">

<div class="content-wrapper" layout:fragment="content">
    <!--Page Title-->
    <div class="page-title dark-background" th:style="|background-image: url('@{/walpaper/showcase-7.webp}');|">
        <div class="container position-relative">
            <h1>Welcome to ITravel</h1>
            <p>This is your profile.</p>

        </div>
    </div> <!--End Page Title-->
    <style>
         .container {
            display: grid;
            grid-template-columns: auto auto;
            padding: 10px;
            grid-template-areas:
                    "profile-avatar" "profile-info"
                    "list_tours" "list_tours";
        }

        .content-wrapper .profile-avatar,
        .content-wrapper .profile-info,
        .content-wrapper .list_tours,
        .content-wrapper .destination-card{
            background: var(--surface-color);
            padding: 10px;
            margin-left: 10px;
            margin-top: 10px;
            font-size: 30px;
            text-align: center;
            height: 500px;
            border-radius: 8px;
            border: 1px solid color-mix(in srgb, #35211f, transparent 90%);
            transition: all 0.3s ease;
        }

        .content-wrapper .profile-avatar:hover,
        .content-wrapper .profile-info:hover,
        .content-wrapper .destination-card:hover{
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }
    </style>
<div class="container">
    <div class="profile-avatar">
        <img th:src="@{'https://api.dicebear.com/9.x/dylan/svg?seed=' + ${user.avatar}}" style="height: 300px; width: 300px" class="rounded-circle me-2 border avatar-option-nav">
        <h4 th:text="${user.username}">Nume utilizator</h4>
    </div>
    <div class="profile-info">
        <h4>Informatii profil</h4>
        <ul>
            <li>Email: <span th:text ="${user.email}">email@example.com</span></li>
            <li> Created at: <span th:text="${user.createdAt}">2025-01-01</span></li>
           <!-- <li>Roles: <span th:text="${user.roles}">Username</span></li>-->
        </ul>
    </div>
    <div sec:authorize="hasRole('Guide')" class="list_tours">

        <h4>Tururile Dumneavoastra</h4>
        <div class = 'container'>
            <div th:if="${#lists.isEmpty(calatorii)}">
                <p>Nu aveți încă tururi.</p>
            </div>
            <div class="row gy-4" th:if="${!#lists.isEmpty(calatorii)}">
                <div class="col-lg-4 col-md-6" th:each="c : ${calatorii}">
                    <div class="destination-card">
                        <div class="image-wrapper">
                            <img th:src="@{/imagine/{img}(img=${c.image})}" alt="Destination" class="img-fluid">
                            <div class="overlay">
                                <div class="badge">Popular</div>
                            </div>
                        </div>

                        <div class="content">
                            <h4 th:text="${c.title}">Titlu</h4>
                            <p th:text="${#strings.abbreviate(c.pricePoints, 100)}">Descriere</p>

                            <div class="card-footer">
                                <form th:action="@{/tours/delete/{id}(id=${c.id})}" method="post">
                                    <button class="btn btn-danger"
                                            onclick="return confirm('Ești sigur că vrei să ștergi acest tur?');">
                                        Delete
                                    </button>
                                </form>
                                <form th:action="@{/Itravel/edit/{id}(id=${c.id})}" method="get">
                                    <button  class="btn btn-login w-100">
                                        Edit
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</html>
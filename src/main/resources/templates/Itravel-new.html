<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">

<div layout:fragment="content">

    <div class="page-title dark-background" th:style="|background-image: url('@{/walpaper/walpaper-image.jpg}');|">
        <div class="container position-relative">
            <h1>Destination Details</h1>
            <p>Create or edit your tour with all details including daily itinerary.</p>
            <nav class="breadcrumbs">
                <ol>
                    <li><a th:href="@{/Itravel}">Home</a></li>
                    <li class="current">Destination Details</li>
                </ol>
            </nav>
        </div>
    </div>

    <section class="py-5">
        <form role="form"
              th:action="${calatorii.id} != null ? '/Itravel/edit/' + ${calatorii.id} : '/Itravel/new'"
              th:object="${calatorii}"
              method="post"
              enctype="multipart/form-data"
              class="card shadow-sm p-4 mx-auto"
              style="max-width: 800px; border-radius: 16px;">

            <h3 class="mb-4 fw-bold text-center text-dark">
                âœ¨ Create / Edit Tour
            </h3>

            <!-- Title -->
            <div class="form-group mb-3">
                <label class="form-label">Title</label>
                <input type="text" class="form-control" th:field="*{title}" placeholder="Ex: Adventure in Alps">
            </div>

            <!-- Subtitle -->
            <div class="form-group mb-3">
                <label class="form-label">Subtitle / Tagline</label>
                <input type="text" class="form-control" th:field="*{subtitle}" placeholder="Ex: Where adventure meets nature">
            </div>

            <!-- Summary -->
            <div class="form-group mb-3">
                <label class="form-label">Short Summary</label>
                <textarea class="form-control" th:field="*{summary}" rows="3" placeholder="Short catchy description"></textarea>
            </div>

            <!-- Description -->
            <div class="form-group mb-3">
                <label class="form-label">Full Description</label>
                <textarea class="form-control" th:field="*{description}" rows="4" placeholder="Full experience details"></textarea>
            </div>

            <!-- Category -->
            <div class="form-group mb-3">
                <label class="form-label">Categorie Tur</label>
                <select class="form-control" th:field="*{category}">
                    <option value="" disabled>SelecteazÄƒ categorie</option>
                    <option value="Cultural" th:selected="${calatorii.category == 'Cultural'}">Cultural</option>
                    <option value="Adventure" th:selected="${calatorii.category == 'Adventure'}">Adventure</option>
                    <option value="Relax" th:selected="${calatorii.category == 'Relax'}">Relax</option>
                    <option value="Gastronomic" th:selected="${calatorii.category == 'Gastronomic'}">Gastronomic</option>
                    <option value="Family" th:selected="${calatorii.category == 'Family'}">Family</option>
                </select>
            </div>

            <!-- Locations -->
            <div class="form-group mb-3">
                <label class="form-label">Locations</label>
                <input type="text" class="form-control" th:field="*{locations}" placeholder="Ex: Rome â€¢ Florence â€¢ Amalfi">
            </div>

            <!-- Price, Duration & Guests -->
            <div class="row">
                <div class="col-md-4 mb-3">
                    <label class="form-label">Price Points</label>
                    <input type="number" class="form-control" th:field="*{pricePoints}" placeholder="Ex: 500">
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Duration (days)</label>
                    <input type="number" class="form-control" th:field="*{duration}" placeholder="Ex: 7">
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Max Guests</label>
                    <input type="number" class="form-control" th:field="*{maxGuests}" placeholder="Ex: 12">
                </div>
            </div>

            <!-- Status -->
            <div class="form-group mb-3">
                <label class="form-label">Status</label>
                <input type="text" class="form-control" th:field="*{status}" placeholder="PUBLISHED / DRAFT">
            </div>

            <!-- Destination -->
            <div class="form-group mb-3">
                <label class="form-label">Destination</label>
                <select class="form-control" th:field="*{destinationId}">
                    <option disabled selected value="">Select destination</option>
                    <option th:each="d : ${destinations}" th:value="${d.id}" th:text="${d.name}"></option>
                </select>
            </div>

            <!-- Highlights -->
            <div class="form-group mb-3">
                <label class="form-label">SelecteazÄƒ highlights</label>
                <div th:each="hl : ${highlights}">
                    <input type="checkbox" th:field="*{highlights}" th:value="${hl}" />
                    <span th:text="${hl.label}"></span>
                </div>
            </div>

            <!-- Cover Image -->
            <div class="mb-4">
                <label class="form-label">Cover Image</label>
                <input type="file" class="form-control" name="imagine" accept="image/*">
            </div>

            <h4 class="mt-4">Itinerariu Zile</h4>

            <div id="itinerariu-container">
                <div class="itinerariu-day card p-3 mb-3"
                     th:each="zi, stat : *{itinerariu}">

                    <input type="number"
                           th:field="*{itinerariu[__${stat.index}__].zi}"
                           class="form-control mb-2"
                           placeholder="Zi"
                           th:value="${zi.zi != null ? zi.zi : stat.index + 1}">

                    <input type="text"
                           th:field="*{itinerariu[__${stat.index}__].titlu}"
                           class="form-control mb-2"
                           placeholder="Titlu"
                           th:value="${zi.titlu}">

                    <input type="text"
                           th:field="*{itinerariu[__${stat.index}__].locatie}"
                           class="form-control mb-2"
                           placeholder="Locatie"
                           th:value="${zi.locatie}">

                    <textarea
                            th:field="*{itinerariu[__${stat.index}__].descriere}"
                            class="form-control mb-2"
                            placeholder="Descriere"
                            th:text="${zi.descriere}"></textarea>

                    <input type="text"
                           th:field="*{itinerariu[__${stat.index}__].features}"
                           class="form-control mb-2"
                           placeholder="Features (comma separated)"
                           th:value="${zi.features != null ? zi.features.join(', ') : ''}">
                </div>
            </div>


                    <button type="button"
                    class="btn btn-secondary mb-4"
                    onclick="addDay()">âž• Add Day</button>

            <div class="d-grid">
                <button type="submit" class="btn btn-login btn-lg">ðŸš€ Publish Tour</button>
            </div>

        </form>
    </section>

</div>



</html>